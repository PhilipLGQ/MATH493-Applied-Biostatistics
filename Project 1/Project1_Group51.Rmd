---
title: "Project 1: Moisture Content of Tree Branches"
author: "Yingxue YU, Guanqun LIU, Yulun Jiang"
date: '2022-03-31'
output: pdf_document
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
df <- read.table("treemoist.dat", sep="")
names(df)[1] <- 'species'
names(df)[2] <- 'branch/species'
names(df)[3] <- 'location'
names(df)[4] <- 'transpiration'
names(df)[5] <- 'moisture_content'
```

## I. Introduction
This dataset is originally collected and used for J. Joseph McDermott's botanical research on the effect of cutting methods have on the moisture content of tree branch samples in 1941. In experiments, researchers use twig segments to confirm the moisture content of woody structure. If the sample is simultaneously cut at both ends, then the release of tension in both direction will not result in instantaneous water removal; whereas cutting at one single end will lead to rapid water loss in the vicinity of cut. 

Grounded on this fact, we conduct a statistical analysis on validating how different cutting methods will affect the extent of water removal given different cut samples. We intend to find an estimation model of how each factor given in the dataset and their interaction terms with cutting methods are related to the mass of moisture content. We will carry out an exploratory data analysis in section II to examine and preprocess the data. Then we will process our data modeling and assessment results in section III, IV, and V. Finally we will conclude our analysis and which part in the original analysis should be criticized. 

## II. EDA
### 2.1 Data Validation
The dataset includes $120$ branch samples, includes 4 variable columns: **species, branch/species, location/branch**, and **transpiration **. The moisture content in the last column is expressed in $10 \times \%$ of its dry sample weight. Under each species, for each possible combination of cutting location (Location/Branch) and transpiration type(Transpiration), we have $5$ sample measurements of moisture contents, which also reveals that the dataset is balanced. We will later exclude the **branch/species** column because it works as an indicator of the former combination. A variance summary table is provided below. In "Location/Branch", "central" refers to simultaneous cut at both ends, "distal" and "proximal" refer to single cuts at branch-terminal end and tree-side respectively. We will keep the numerical values of the classes for analysis consistency. 

| **Var Name** | **Type** | **Category** | **Classes** | **Detail** |
|:-:|:-:|:-:|:-:|:--|
| **Species** | num | categorical | 4 | 1=Loblolly Pine 2=Shortleaf Pine \ 3=Yellow Poplar 4=Red Gum
| **Location/Branch** | num | categorical | 3 | 1=Central 2=Distal 3=Proximal
| **Transpiration** | num | categorical | 2 | 1=Rapid 2=Slow
| **MoistureContent** | num | continuous | N/A | **Target Response** |

```{r, echo=FALSE, include=FALSE}
dim(df)
sum(is.na(df))
```
### 2.2 Univariate Analysis
```{r, fig.width=8, fig.height=1.8, echo=FALSE}
library(data.table)
library(ggplot2)
library(gridExtra)

plt1 <- ggplot(df, aes(x=factor(species))) + geom_bar(stat="count", width = 0.5) + xlab("Species") +ylab("Frequency")
plt2 <- ggplot(df, aes(x=factor(location))) + geom_bar(stat="count", width = 0.5) + xlab("Location/Branch") +ylab("")
plt3 <- ggplot(df, aes(x=factor(transpiration))) + geom_bar(stat="count", width = 0.5) + xlab("Transpiration") +ylab("")
plt4 <- ggplot(df, aes(x=moisture_content)) + geom_histogram(bins=40, boundary=1) +xlab("Moisture Content")+ylab("")
grid.arrange(plt1, plt2, plt3, plt4, ncol=4, top="Fig. 1: Frequency Count of Variates")
```
From the histograms above, we can see that for "Species", "Location/Branch" and "Transpiration", the variety in each variate is equally distributed. For the response variate, we expand its value distribution analysis as follows:

```{r, fig.width=5, fig.height=2.2, fig.align='center', echo=FALSE}
library(knitr)
library(ggplot2)
library(gridExtra)
library(grid)

m_summary <- as.data.frame(apply(df, 2, summary))[5]
m_summary[7,] <- c(m_summary[2,]-m_summary[5,])
rownames(m_summary)[7] <- c("IQR")
m_summary[8,] <- c(sd(df$moisture_content))
rownames(m_summary)[8] <- c("SD")
colnames(m_summary) <- c("Moisture Content")
plt5 <- ggplot(df, aes(x="", y=moisture_content)) + geom_boxplot(width=0.5, outlier.colour="red", outlier.shape=12) + xlab("") + ylab("Value")
tbl1 <- tableGrob(m_summary, theme = ttheme_default(base_size = 6.5))
grid.arrange(tbl1, plt5, ncol=2, top=textGrob("Fig. 2: Basic Statistics of Response Variate", gp=gpar(fontsize=10, font=8)))
```



### 2.3 Bivariate Analysis
A two way table for the dataset:
```{r, echo=FALSE}

```

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

## III. Model Fitting

## IV. Assessment

## V. Plots

## VI. Conclusion

